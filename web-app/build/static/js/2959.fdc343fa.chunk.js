(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[2959,614],{30614:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var s=n(65043),o=n(94141),a=n(89923),i=n(56629),l=n(53518),r=n(77403),c=n(64159),d=n(20554),u=n(70579);const h=e=>{let{modalOpen:t,onClose:n,bucket:h,prefilledRoute:x}=e;const m=(0,d.jL)(),[p,j]=(0,s.useState)(""),[b,g]=(0,s.useState)("readonly");(0,s.useEffect)((()=>{x&&j(x)}),[x]);return(0,u.jsx)(o.A,{modalOpen:t,title:"Add Anonymous Access Rule",onClose:n,titleIcon:(0,u.jsx)(a.No_,{}),children:(0,u.jsxs)(a.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,u.jsx)(a.cl_,{value:p,label:"Prefix",id:"prefix",name:"prefix",placeholder:"Enter Prefix",onChange:e=>{j(e.target.value)},tooltip:"Enter '/' to apply the rule to all prefixes and objects at the bucket root. Do not include the wildcard asterisk '*' as part of the prefix *unless* it is an explicit part of the prefix name. The Console automatically appends an asterisk to the appropriate sections of the resulting IAM policy."}),(0,u.jsx)(a.l6P,{id:"access",name:"Access",onChange:e=>{g(e)},label:"Access",value:b,options:[{label:"readonly",value:"readonly"},{label:"writeonly",value:"writeonly"},{label:"readwrite",value:"readwrite"}],disabled:!1,helpTip:(0,u.jsx)(s.Fragment,{children:"Select the desired level of access available to unauthenticated Users"}),helpTipPlacement:"right"}),(0,u.jsxs)(a.xA9,{item:!0,xs:12,sx:r.Uz.modalButtonBar,children:[(0,u.jsx)(a.$nd,{id:"clear",type:"button",variant:"regular",onClick:()=>{j(""),g("readonly")},label:"Clear"}),(0,u.jsx)(a.$nd,{id:"add-access-save",type:"submit",variant:"callAction",disabled:""===p.trim(),onClick:()=>{i.F.bucket.setAccessRuleWithBucket(h,{prefix:p,access:b}).then((e=>{m((0,c.Hk)("Access Rule added successfully")),n()})).catch((e=>{m((0,c.C9)((0,l.S)(e.error))),n()}))},label:"Save"})]})]})})}},27945:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Me});var s=n(65043),o=n(22166),a=n(73216),i=n(56629),l=n(20554),r=n(99161),c=n(56483),d=n(6035),u=n(33097),h=n.n(u),x=n(89923),m=n(53518),p=n(94281),j=n(24241),b=n(61476),g=n.n(b),f=n(94574),v=n(35475),_=n(77938),S=n(72237),O=n(64159);const w=e=>(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],T=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Object.keys(e).reduce(((n,s)=>(w(s)&&s.includes(t)&&(n[s]=e[s]),n)),{});return Object.keys(s).filter((e=>{const o=s[e].some((e=>n.find((t=>{let n=!1;if(-1!==t.indexOf("*")){const s=t.substring(0,t.length-1);n=e.includes(s)}return n||e===t})))),a=e.substring(0,e.indexOf("/*."))==="arn:aws:s3:::".concat(t);return o&&(a&&"arn:aws:s3:::*"!==e)}))};var y=n(70579);const C=(0,S.A)(s.lazy((()=>n.e(7774).then(n.bind(n,97774))))),E=f.Ay.div((()=>({display:"flex","& .additionalOptions":{paddingRight:"10px",display:"flex",alignItems:"center",["@media (max-width: ".concat(x.nmC.lg,"px)")]:{display:"none"}},"& .slashSpacingStyle":{margin:"0 5px"}}))),A=e=>{let{bucketName:t,internalPaths:n,hidePathButton:i,additionalOptions:u}=e;const h=(0,l.jL)(),m=(0,a.Zp)(),p=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),j=(0,o.d4)((e=>e.objectBrowser.versionsMode)),b=(0,o.d4)((e=>e.objectBrowser.versionedFile)),f=(0,o.d4)((e=>e.system.anonymousMode)),[S,w]=(0,s.useState)(!1),[A,N]=(0,s.useState)(!1),I=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],k=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{}));let B=n;""!==n&&(B="/".concat(n));const F=B.split("/").filter((e=>""!==e)),L=F.length-1,V=t+B||t,D=T(k,V,I);(0,s.useEffect)((()=>{N(!1),Object.keys(k).forEach((e=>{e.includes(V)&&e.includes("/*")&&N(!0)}))}),[V,n,k]);const P=(0,_._)([V,...D],I)||f||A;let R=F.map(((e,n)=>{const o="".concat(F.slice(0,n+1).join("/"),"/"),a="/browser/".concat(t,"/").concat(o?"".concat((0,c.nf)(o)):"");return n===L&&e===b?null:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===L?(0,y.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,c.Tw)(e)}):(0,y.jsx)(v.N_,{style:{whiteSpace:"pre"},to:a,onClick:()=>{h((0,d.cQ)({status:!1,objectName:""}))},children:(0,c.Tw)(e)})]},"breadcrumbs-".concat(n.toString()))})),z=[];j&&(z=[(0,y.jsx)(s.Fragment,{children:(0,y.jsxs)("span",{children:[(0,y.jsx)("span",{className:"slashSpacingStyle",children:"/"}),b," - Versions"]})},"breadcrumbs-versionedItem")]);const U=[(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(v.N_,{to:"/browser/".concat(t),onClick:()=>{h((0,d.cQ)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path"),...R,...z];return(0,y.jsxs)(s.Fragment,{children:[(0,y.jsxs)(E,{children:[S&&(0,y.jsx)(C,{modalOpen:S,bucketName:t,folderName:n,onClose:()=>{w(!1)},limitedSubPath:A&&!((0,_._)([V,...D],I)||f)}),(0,y.jsx)(x.BIu,{sx:{whiteSpace:"pre"},goBackFunction:()=>{if(j)h((0,d.cQ)({status:!1,objectName:""}));else{if(0===F.length)return void m("/browser");const e=F.slice(0,-1);m("/browser/".concat(t).concat(e.length>0?"/".concat((0,c.nf)("".concat(e.join("/"),"/"))):""))}},additionalOptions:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(g(),{text:"".concat(t,"/").concat(F.join("/")),children:(0,y.jsx)(x.$nd,{id:"copy-path",icon:(0,y.jsx)(x.TdU,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:()=>{h((0,O.Hk)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,y.jsx)(x.azJ,{className:"additionalOptions",children:u})]}),children:U}),!i&&(0,y.jsx)(x.m_M,{tooltip:P?"Choose or create a new path":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"create a new path"),children:(0,y.jsx)(x.$nd,{id:"new-path",onClick:()=>{w(!0)},disabled:!f&&(p||!P),icon:(0,y.jsx)(x.pj3,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,y.jsx)(x.azJ,{sx:{display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"},["@media (max-width: ".concat(x.nmC.lg,"px)")]:{display:"flex"}},children:u})]})};var N=n(93445);const I=e=>"Enabled"===e||"Suspended"===e;var k=n(37414),B=n(39947),F=n(81708),L=n(6681);const V=e=>{let{uploadPath:t,bucketName:n,forceDisable:a=!1,uploadFileFunction:i,uploadFolderFunction:l,overrideStyles:c={}}=e;const[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1),p=(0,o.d4)((e=>e.system.anonymousMode)),j=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),b=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],g=T(j,t,b),f=Boolean(d),v=()=>{u(null)},S=(0,_._)([t,...g],b)||p,O=(0,_._)([n,...g],b,!1,!0),w=S||O;return(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(L.A,{tooltip:w?"Upload Files":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,y.jsx)(x.$nd,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":f?"true":void 0,onClick:e=>{m(!h),u(e.currentTarget)},label:"Upload",icon:(0,y.jsx)(x.JMY,{}),variant:"callAction",disabled:a||!w,sx:c})}),(0,y.jsx)(x.Vey,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,y.jsx)(x.JMY,{}),value:"file",disabled:!S||a},{label:"Upload Folder",icon:(0,y.jsx)(x.nDF,{}),value:"folder",disabled:!O||a}],selectedOption:"",onSelect:e=>{"folder"!==e?i(v):l(v)},hideTriggerAction:()=>{m(!1)},open:h,anchorEl:d,anchorOrigin:"end",useAnchorWidth:!0})]})},D=e=>{let{open:t,closePanel:n,className:s="",children:o}=e;return(0,y.jsxs)(x.azJ,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:"".concat(t?"open":""," ").concat(s),children:[(0,y.jsx)(x.$nd,{variant:"text",id:"close-details-list",onClick:n,icon:(0,y.jsx)(x._FR,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),o]})};var P=n(48245);const R=e=>{let{icon:t,strings:n}=e;return(0,y.jsxs)(x.azJ,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,y.jsx)("span",{className:"fileNameText",children:(0,c.qf)(n[n.length-1])})]})},z=[{icon:(0,y.jsx)(x.FRZ,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,y.jsx)(x.jCy,{}),extensions:["mp3","m4a","aac"]},{icon:(0,y.jsx)(x.yTC,{}),extensions:["pdf"]},{icon:(0,y.jsx)(x.QvW,{}),extensions:["ppt","pptx"]},{icon:(0,y.jsx)(x.z9t,{}),extensions:["xls","xlsx"]},{icon:(0,y.jsx)(x.VSs,{}),extensions:["cer","crt","pem"]},{icon:(0,y.jsx)(x.bM2,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,y.jsx)(x.qM2,{}),extensions:["cfg","yaml"]},{icon:(0,y.jsx)(x.ITz,{}),extensions:["sql"]},{icon:(0,y.jsx)(x.PcO,{}),extensions:["ttf","otf"]},{icon:(0,y.jsx)(x.yEV,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,y.jsx)(x.j_m,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,y.jsx)(x.DUd,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,y.jsx)(x.nLN,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],U=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,s=(0,y.jsx)(x.KlI,{});e.endsWith("/")&&(s=(0,y.jsx)(x.kez,{}),n=e.slice(0,-1));const o=e.toLowerCase();for(const i of z)for(const e of i.extensions)o.endsWith(".".concat(e))&&(s=i.icon);!e.endsWith("/")&&e.indexOf(".")<0&&(s=(0,y.jsx)(x.YJK,{}));const a=n.split("/");return t?s:(0,y.jsx)(R,{icon:s,strings:a})};var G=n(37524);const M=e=>{let{metaData:t}=e;const n=Object.keys(t);return(0,y.jsx)(s.Fragment,{children:n.map(((e,n)=>{const s=(e=>Array.isArray(e)?e.map(c.Tw).join(", "):(0,c.Tw)(e))(t[e]);return(0,y.jsxs)(x.azJ,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,y.jsx)("strong",{children:e}),(0,y.jsx)("br",{}),s]},"box-meta-".concat(e,"-").concat(n.toString()))}))})};var J=n(30718),W=n(85330),K=n(77403);const H=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],Y=Array.from(Array(31),((e,t)=>({value:(t+1).toString(),label:(t+1).toString()}))),$=(new Date).getFullYear(),Z=Array.from(Array(50),((e,t)=>({value:(t+$).toString(),label:(t+$).toString()})));var q=n(94141);const Q=(0,s.forwardRef)(((e,t)=>{let{id:n,label:o,disableOptions:a=!1,tooltip:i="",borderBottom:l=!1,onDateChange:r,value:c=""}=e;(0,s.useImperativeHandle)(t,(()=>({resetDate:b})));const[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,j]=(0,s.useState)("");(0,s.useEffect)((()=>{if(""!==c){const e=c.split("-");j(e[0]),u(e[1]),m("".concat(parseInt(e[2])))}}),[c]),(0,s.useEffect)((()=>{const[e,t]=((e,t,n)=>{const s=Date.parse("".concat(e,"-").concat(t,"-").concat(n));if(isNaN(s))return[!1,""];const o=parseInt(t),a=parseInt(n),i=o<10?"0".concat(o):o,l=a<10?"0".concat(a):a,r=new Date(s).toISOString().split("T")[0],c="".concat(e,"-").concat(i,"-").concat(l);return[r===c,c]})(p,d,h);r(t,e)}),[d,h,p,r]);const b=()=>{u(""),m(""),j("")},g=()=>a||!1,f=[{value:"",label:"<Month>"},...H],v=[{value:"",label:"<Day>"},...Y],_=[{value:"",label:"<Year>"},...Z];return(0,y.jsxs)(x.azJ,{className:"inputItem",children:[(0,y.jsx)(x.azJ,{sx:{display:"flex",alignItems:"center",gap:5,marginBottom:5},children:(0,y.jsxs)(x.l1Y,{htmlFor:n,children:[(0,y.jsx)("span",{children:o}),""!==i&&(0,y.jsx)(x.azJ,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,y.jsx)(x.m_M,{tooltip:i,placement:"top",children:(0,y.jsx)(x.azJ,{sx:{"& .min-icon":{width:13}},children:(0,y.jsx)(x.NTw,{})})})})]})}),(0,y.jsxs)(x.azJ,{sx:{display:"flex",gap:12},children:[(0,y.jsx)(x.l6P,{id:"".concat(n,"-month"),name:"".concat(n,"-month"),value:d,onChange:e=>{u(e)},options:f,label:"",disabled:g()}),(0,y.jsx)(x.l6P,{id:"".concat(n,"-day"),name:"".concat(n,"-day"),value:h,onChange:e=>{m(e)},options:v,label:"",disabled:g()}),(0,y.jsx)(x.l6P,{id:"".concat(n,"-year"),name:"".concat(n,"-year"),value:p,onChange:e=>{j(e)},options:_,label:"",disabled:g(),sx:{marginBottom:12}})]})]})})),X=e=>{let{open:t,closeModalAndRefresh:n,objectName:a,objectInfo:r,bucketName:d}=e;const u=(0,l.jL)(),h=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),[p,j]=(0,s.useState)(!0),[b,g]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[_,S]=(0,s.useState)(!1),[w,T]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(r.retention_mode&&(g((null===h||void 0===h?void 0:h.mode)||W.BT.Governance),E(!0)),r.retention_until_date){const t=new Date(r.retention_until_date);if("Invalid Date"!==t.toString()){const n=t.getFullYear(),s=(e=t.getMonth()+1)<10?"0".concat(e):"".concat(e),o=t.getDate();isNaN(o)||"NaN"===s||isNaN(n)||v("".concat(n,"-").concat(s,"-").concat(o))}E(!0)}var e}),[r,null===h||void 0===h?void 0:h.mode]);const A=(0,s.useRef)(null),N=()=>{j(!1),g(W.BT.Governance),A.current&&A.current.resetDate()},I=C&&("governance"===b||""===b);return(0,y.jsx)(q.A,{title:"Set Retention Policy",modalOpen:t,onClose:()=>{N(),n(!1)},children:(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:(0,y.jsxs)(x.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(x.azJ,{className:"inputItem",children:[(0,y.jsx)("strong",{children:"Selected Object"}),": ",a]}),I&&(0,y.jsx)(x.dOG,{value:"status",id:"status",name:"status",checked:p,onChange:e=>{j(!p)},label:"Status",indicatorLabels:["Enabled","Disabled"]}),(0,y.jsx)(x.z6M,{currentValue:b,id:"type",name:"type",label:"Type",disableOptions:!p||C&&""!==b,onChange:e=>{g(e.target.value)},selectorOptions:[{label:"Governance",value:W.BT.Governance},{label:"Compliance",value:W.BT.Compliance}]}),(0,y.jsx)(Q,{id:"date",label:"Date",disableOptions:!(p&&("governance"===b||"compliance"===b)),ref:A,value:f,borderBottom:!0,onDateChange:(e,t)=>{S(t),t&&v(e)}}),(0,y.jsxs)(x.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,y.jsx)(x.$nd,{id:"reset",type:"button",variant:"regular",onClick:N,label:"Reset"}),(0,y.jsx)(x.$nd,{id:"save",type:"submit",variant:"callAction",disabled:p&&""===b||p&&!_||w,onClick:()=>{T(!0);const e=r.name||"",t=r.version_id||null,s=p||"governance"!==b?"".concat(f,"T23:59:59Z"):"";p||"governance"!==b?((e,t,s)=>{i.F.buckets.putObjectRetention(d,{prefix:(0,c.nf)(e),version_id:t||""},{expires:s,mode:b}).then((()=>{T(!1),n(!0)})).catch((e=>{u((0,O.Dy)((0,m.S)(e.error))),T(!1)}))})(e,t,s):((e,t)=>{i.F.buckets.deleteObjectRetention(d,{prefix:(0,c.nf)(e),version_id:t||""}).then((()=>{T(!1),n(!0)})).catch((e=>{u((0,O.Dy)((0,m.S)(e.error))),T(!1)}))})(e,t)},label:"Save"})]})]})})})};var ee=n(58661),te=n(25448);const ne=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:a,selectedObject:i,versioningInfo:d,selectedVersion:u=""}=e;const h=(0,l.jL)(),[m,p]=(0,te.A)((()=>t(!0)),(e=>{h((0,O.C9)(e)),"Access Denied."===e.detailedError&&t(!0)})),[j,b]=(0,s.useState)(!1),[g,f]=(0,s.useState)(!1),v=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),S=(0,_._)([a],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===v||void 0===v?void 0:v.mode);if(!i)return null;return(0,y.jsx)(ee.A,{title:"Delete Object",confirmText:"Delete",isOpen:n,titleIcon:(0,y.jsx)(x.xWY,{}),isLoading:m,onConfirm:()=>{const e=(0,c.x6)(i).endsWith("/");p("DELETE","/api/v1/buckets/".concat(a,"/objects?prefix=").concat(i).concat(""!==u?"&version_id=".concat(u):"&recursive=".concat(e,"&all_versions=").concat(j)).concat(g?"&bypass=true":""))},onClose:()=>t(!1),confirmationContent:(0,y.jsxs)(s.Fragment,{children:["Are you sure you want to delete: ",(0,y.jsx)("br",{}),(0,y.jsx)("b",{children:(0,c.x6)(i)})," ",""!==u?(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"Version ID:",(0,y.jsx)("br",{}),(0,y.jsx)("strong",{children:u})]}):"","? ",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),I(null===d||void 0===d?void 0:d.status)&&""===u&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(x.dOG,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:j,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{b(!j)},description:""})}),S&&(j||""!==u)&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)("div",{style:{marginTop:10},children:(0,y.jsx)(x.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{f(!g)},description:""})})}),j&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,y.jsx)("br",{}),"This action is irreversible."]}),(0,y.jsx)("br",{}),"Are you sure you want to continue?"]})]})})},se=e=>{let{open:t,closeModalAndRefresh:n,objectName:o,bucketName:a,actualInfo:r}=e;const d=(0,l.jL)(),[u,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),g=r.version_id;(0,s.useEffect)((()=>{const e=h()(r,"legal_hold_status","OFF");p("ON"===e)}),[r]);const f=()=>{p(!1)};return(0,y.jsx)(q.A,{title:"Set Legal Hold",modalOpen:t,onClose:()=>{f(),n(!1)},children:(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),b(!0),i.F.buckets.putObjectLegalHold(a,{prefix:(0,c.nf)(o),version_id:g||""},{status:u?W.SW.Enabled:W.SW.Disabled}).then((()=>{b(!1),n(!0)})).catch((e=>{d((0,O.Dy)((0,m.S)(e.error))),b(!1)}))})(e)},children:(0,y.jsxs)(x.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(x.azJ,{className:"inputItem",children:[(0,y.jsx)("strong",{children:"Object"}),": ",a]}),(0,y.jsx)(x.dOG,{value:"legalhold",id:"legalhold",name:"legalhold",checked:u,onChange:e=>{p(!u)},label:"Legal Hold Status",indicatorLabels:["Enabled","Disabled"],tooltip:"To enable this feature you need to enable versioning on the bucket before creation"}),(0,y.jsxs)(x.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,y.jsx)(x.$nd,{id:"clear",type:"button",variant:"regular",onClick:f,label:"Clear"}),(0,y.jsx)(x.$nd,{id:"save",type:"submit",variant:"callAction",disabled:j,label:" Save"})]})]})})})},oe=f.Ay.b((e=>{let{theme:t}=e;return{color:h()(t,"signalColors.danger","#C83B51"),marginLeft:5}})),ae=e=>{var t;let{modalOpen:n,onCloseAndUpdate:a,bucketName:d,actualInfo:u}=e;const p=(0,l.jL)(),j=(0,o.d4)(O.Rq),[b,g]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[S,w]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)(""),[N,I]=(0,s.useState)(""),k=(0,c.nf)(u.name||""),B=u.tags,F=Object.keys(B||{}),L=null===(t=u.name)||void 0===t?void 0:t.split("/"),V=(null===L||void 0===L?void 0:L.pop())||"",D=e=>(0,y.jsxs)(x.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Tag",e?"s":""," for: ",(0,y.jsx)("strong",{children:V})]});return(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(q.A,{modalOpen:n,title:T?"Delete Tag":"Edit Tags",onClose:()=>{a(!0)},iconColor:T?"delete":"default",titleIcon:T?(0,y.jsx)(x.aaC,{}):(0,y.jsx)(x.cGQ,{}),children:T?(0,y.jsx)(s.Fragment,{children:(0,y.jsxs)(x.xA9,{container:!0,children:[D(!1),"Are you sure you want to delete the tag"," ",(0,y.jsxs)(oe,{children:[E," : ",N]})," ","?",(0,y.jsxs)(x.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,y.jsx)(x.$nd,{id:"cancel",type:"button",variant:"regular",onClick:()=>{A(""),I(""),C(!1)},label:"Cancel"}),(0,y.jsx)(x.$nd,{type:"submit",variant:"secondary",onClick:()=>{const e={...B};delete e[E];const t=j?u.version_id||"":"null";i.F.buckets.putObjectTags(d,{prefix:k,version_id:t},{tags:e}).then((()=>{a(!0),w(!1)})).catch((e=>{p((0,O.Dy)((0,m.S)(e.error))),w(!1)}))},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,y.jsxs)(x.azJ,{children:[(0,y.jsx)(_.R,{scopes:[r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS],resource:d,children:(0,y.jsxs)(x.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[D(!0),(0,y.jsxs)(x.azJ,{sx:{fontSize:14,fontWeight:"normal"},children:["Current Tags:",(0,y.jsx)("br",{}),0===F.length?(0,y.jsx)("span",{className:"muted",children:"There are no tags for this object"}):(0,y.jsx)(s.Fragment,{}),(0,y.jsx)(x.azJ,{sx:{marginTop:"5px",marginBottom:"15px"},children:F.map(((e,t)=>{const n=h()(B,"".concat(e),"");return""!==n?(0,y.jsx)(_.R,{scopes:[r.OV.S3_DELETE_OBJECT_TAGGING],resource:d,errorProps:{deleteIcon:null,onDelete:null},children:(0,y.jsx)(x.vwO,{id:"".concat(e," : ").concat(n),label:"".concat(e," : ").concat(n),variant:"regular",color:"default",onDelete:()=>{((e,t)=>{A(e),I(t),C(!0)})(e,n)}})},"chip-".concat(t)):null}))})]})]})}),(0,y.jsx)(_.R,{scopes:[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS],resource:d,errorProps:{disabled:!0,onClick:null},children:(0,y.jsxs)(x.azJ,{children:[(0,y.jsx)(x._xt,{icon:(0,y.jsx)(x.b_$,{}),separator:!1,children:"Add New Tag"}),(0,y.jsxs)(x.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,y.jsx)(x.cl_,{value:b,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:e=>{g(e.target.value)}}),(0,y.jsx)(x.cl_,{value:f,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:e=>{v(e.target.value)}}),(0,y.jsxs)(x.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:[(0,y.jsx)(x.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{v(""),g("")},label:"Clear"}),(0,y.jsx)(x.$nd,{type:"submit",variant:"callAction",disabled:""===f.trim()||""===b.trim()||S,onClick:()=>{w(!0);const e={};e[b]=f;const t={...B,...e},n=j?u.version_id||"":"null";i.F.buckets.putObjectTags(d,{prefix:k,version_id:n},{tags:t}).then((()=>{a(!0),w(!1)})).catch((e=>{p((0,O.Dy)((0,m.S)(e.error))),w(!1)}))},id:"saveTag",label:"Save"})]})]})]})})]})})})};var ie=n(49501);const le=e=>{let{closeInspectModalAndRefresh:t,inspectOpen:n,inspectPath:o,volumeName:a}=e;const i=(0,l.jL)(),r=()=>t(!1),[d,u]=(0,s.useState)(!0),[h,m]=(0,s.useState)(""),[p,j]=(0,s.useState)("");if(!o)return null;return(0,y.jsxs)(s.Fragment,{children:[!h&&(0,y.jsx)(q.A,{modalOpen:n,titleIcon:(0,y.jsx)(x.nTF,{}),title:"Inspect Object",onClose:r,children:(0,y.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:["Would you like to encrypt ",(0,y.jsx)("b",{children:(0,c.x6)(o)}),"?"," ",(0,y.jsx)("br",{}),(0,y.jsx)(x.dOG,{label:"Encrypt",indicatorLabels:["Yes","No"],checked:d,value:"encrypt",id:"encrypt",name:"encrypt",onChange:e=>{u(!d)},description:""}),(0,y.jsx)(x.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:(0,y.jsx)(x.$nd,{id:"inspect",type:"submit",variant:"callAction",color:"primary",onClick:async()=>{const e=(0,c.nf)(o+"/xl.meta"),t=(0,c.nf)(a);let n=document.baseURI.replace(window.location.origin,"");(async e=>await fetch(e,{method:"GET"}))("".concat(window.location.origin).concat(n,"/api/v1/admin/inspect?volume=").concat(t,"&file=").concat(e,"&encrypt=").concat(d)).then((async e=>{if(!e.ok){const t=await e.json();i((0,O.C9)({errorMessage:t.message,detailedError:t.code}))}const t=await e.blob(),n=e.headers.get("content-disposition").split('"')[1],s=(0,c.UM)(n)||"";(0,c.OT)(t,n),j(n),""!==s?m(s):r()})).catch((e=>{i((0,O.C9)(e))}))},label:"Inspect"})})]})}),h?(0,y.jsxs)(q.A,{modalOpen:n,title:"Inspect Decryption Key",onClose:()=>{(0,c.Yj)(p),r(),m("")},titleIcon:(0,y.jsx)(x.aJN,{}),children:[(0,y.jsxs)(x.azJ,{children:["This will be displayed only once. It cannot be recovered.",(0,y.jsx)("br",{}),"Use secure medium to share this key."]}),(0,y.jsx)(x.azJ,{children:(0,y.jsx)(ie.A,{value:h})})]}):null]})},re=e=>{let{open:t,closeModal:n,currentItem:o,internalPaths:a,actualInfo:i,bucketName:r}=e;const c=(0,l.jL)(),[d,u]=(0,s.useState)(o),[h,m]=(0,s.useState)(!1);return(0,y.jsxs)(q.A,{title:"Rename Download",modalOpen:t,onClose:n,titleIcon:(0,y.jsx)(x.qUP,{}),children:[(0,y.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,y.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{})," We recommend to rename the file download"]}),(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),(0,P._)(c,r,a,i),n()})(e)},children:(0,y.jsxs)(x.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsx)(x.cl_,{id:"download-filename",name:"download-filename",onChange:e=>{u(e.target.value)},label:"",type:"text",value:d,error:d.length>200&&!h?"Filename should be less than 200 characters long.":""}),(0,y.jsx)(x.dOG,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:h,onChange:e=>{m(e.target.checked),e.target.checked&&u(o)},label:"Use Original Name"}),(0,y.jsx)(x.xA9,{item:!0,xs:12,sx:K.Uz.modalButtonBar,children:(0,y.jsx)(x.$nd,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:d.length>200&&!h,label:"Download File"})})]})})]})},ce={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},de=e=>{let{internalPaths:t,bucketName:n,versioningInfo:a,locking:u,onClosePanel:m}=e;const p=(0,l.jL)(),j=(0,o.d4)(O.Rq),b=(0,o.d4)((e=>e.objectBrowser.versionsMode)),g=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),f=(0,o.d4)((e=>e.objectBrowser.loadingObjectInfo)),[v,S]=(0,s.useState)(!1),[w,T]=(0,s.useState)(!1),[C,E]=(0,s.useState)(!1),[A,I]=(0,s.useState)(!1),[k,B]=(0,s.useState)(!1),[F,V]=(0,s.useState)(null),[D,R]=(0,s.useState)([]),[z,W]=(0,s.useState)(null),[K,H]=(0,s.useState)([]),[Y,$]=(0,s.useState)(!1),[Z,q]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(0),[te,oe]=(0,s.useState)(!1),[ie,de]=(0,s.useState)(null),[ue,he]=(0,s.useState)(!1),xe=((0,c.x6)(t)||"").split("/").pop()||"";let me=[];F&&F.name&&(me=F.name.split("/")),(0,s.useEffect)((()=>{if(j&&D&&D.length>=1){let e=D.find((e=>e.is_latest))||ce;""!==g&&(e=D.find((e=>e.version_id===g))||ce),e.is_delete_marker||he(!0),V(e)}}),[g,j,D]),(0,s.useEffect)((()=>{f&&""!==t&&i.F.buckets.listObjects(n,{prefix:t,with_versions:j}).then((e=>{const t=e.data.objects||[];if(j){R(t),H(t);const e=t.reduce(((e,t)=>null!==t&&void 0!==t&&t.size?e+t.size:e),0);ee(e)}else{const e=t[0];V(e),H([]),e.is_delete_marker||he(!0)}p((0,d.oe)(!1))})).catch((e=>{console.error("Error loading object details",e.error),p((0,d.oe)(!1))}))}),[f,n,t,p,j,g]),(0,s.useEffect)((()=>{ue&&""!==t&&i.F.buckets.getObjectMetadata(n,{prefix:t}).then((e=>{let t=h()(e.data,"objectMetadata",{});de(t),he(!1)})).catch((e=>{console.error("Error Getting Metadata Status: ",e.detailedError),he(!1)}))}),[n,t,ue]);let pe=[];F&&F.tags&&(pe=Object.keys(F.tags));const je=(0,y.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,y.jsx)(x.aHM,{})});if(!F)return f?je:null;const be=me.length>0?me[me.length-1]:F.name,ge=[n,xe,[n,F.name].join("/")],fe=(0,_._)(n,[r.OV.S3_PUT_OBJECT_LEGAL_HOLD,r.OV.S3_PUT_ACTIONS]),ve=(0,_._)(ge,[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS]),_e=(0,_._)(ge,[r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_PUT_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],!0),Se=(0,_._)(ge,[r.OV.ADMIN_INSPECT_DATA]),Oe=(0,_._)(ge,[r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_OBJECT_VERSION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),we=(0,_._)(ge,[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS]),Te=(0,_._)([n,xe,[n,F.name].join("/")],[r.OV.S3_DELETE_OBJECT]);let ye=(0,N.IZ)(ie,xe);const Ce=[{action:()=>{(0,P._)(p,n,t,F)},label:"Download",disabled:!!F.is_delete_marker||!we,icon:(0,y.jsx)(x.s3U,{}),tooltip:we?"Download this Object":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"download this object")},{action:()=>{S(!0)},label:"Share",disabled:!!F.is_delete_marker||!we,icon:(0,y.jsx)(x.liv,{}),tooltip:we?"Share this File":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"share this object")},{action:()=>{q(!0)},label:"Preview",disabled:!!F.is_delete_marker||"none"===ye&&!we,icon:(0,y.jsx)(x.cyn,{}),tooltip:we?"Preview this File":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"preview this object")},{action:()=>{I(!0)},label:"Legal Hold",disabled:!u||!j||!!F.is_delete_marker||!fe||""!==g,icon:(0,y.jsx)(x.ODz,{}),tooltip:fe?u?"Change Legal Hold rules for this File":"Object Locking must be enabled on this bucket in order to set Legal Hold":(0,r.vj)([r.OV.S3_PUT_OBJECT_LEGAL_HOLD,r.OV.S3_PUT_ACTIONS],"change legal hold settings for this object")},{action:()=>{T(!0)},label:"Retention",disabled:!j||!!F.is_delete_marker||!_e||""!==g||!u,icon:(0,y.jsx)(x.gn6,{}),tooltip:_e?u?"Change Retention rules for this File":"Object Locking must be enabled on this bucket in order to set Retention Rules":(0,r.vj)([r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_PUT_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"change Retention Rules for this object")},{action:()=>{E(!0)},label:"Tags",disabled:!!F.is_delete_marker||""!==g||!ve,icon:(0,y.jsx)(x.P3Z,{}),tooltip:ve?"Change Tags for this File":(0,r.vj)([r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"set Tags on this object")},{action:()=>{B(!0)},label:"Inspect",disabled:!j||!!F.is_delete_marker||""!==g||!Se,icon:(0,y.jsx)(x.nTF,{}),tooltip:Se?"Inspect this file":(0,r.vj)([r.OV.ADMIN_INSPECT_DATA],"inspect this file")},{action:()=>{p((0,d.cQ)({status:!b,objectName:be}))},label:b?"Hide Object Versions":"Display Object Versions",icon:(0,y.jsx)(x.j1U,{}),disabled:!j||!(F.version_id&&"null"!==F.version_id)||!Oe,tooltip:Oe?F.version_id&&"null"!==F.version_id?"Display Versions for this file":"":(0,r.vj)([r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_OBJECT_VERSION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,y.jsxs)(s.Fragment,{children:[v&&F&&(0,y.jsx)(J.default,{open:v,closeModalAndRefresh:()=>{W(null),S(!1)},bucketName:n,dataObject:z||F}),w&&F&&(0,y.jsx)(X,{open:w,closeModalAndRefresh:e=>{T(!1),e&&p((0,d.oe)(!0))},objectName:xe,objectInfo:F,bucketName:n}),Y&&(0,y.jsx)(ne,{deleteOpen:Y,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:e=>{$(!1),e&&""===g?m(!0):(p((0,d.SK)(!0)),p((0,d.Ai)("")),p((0,d.oe)(!0)))},versioningInfo:j?a:void 0,selectedVersion:g}),A&&F&&(0,y.jsx)(se,{open:A,closeModalAndRefresh:e=>{I(!1),e&&p((0,d.oe)(!0))},objectName:F.name||"",bucketName:n,actualInfo:F}),Z&&F&&(0,y.jsx)(G.default,{open:Z,bucketName:n,actualInfo:F,onClosePreview:()=>{q(!1)}}),C&&F&&(0,y.jsx)(ae,{modalOpen:C,bucketName:n,actualInfo:F,onCloseAndUpdate:e=>{E(!1),e&&p((0,d.oe)(!0))}}),k&&F&&(0,y.jsx)(le,{inspectOpen:k,volumeName:n,inspectPath:F.name||"",closeInspectModalAndRefresh:e=>{B(!1),e&&p((0,d.oe)(!0))}}),te&&F&&(0,y.jsx)(re,{open:te,closeModal:()=>{oe(!1)},currentItem:xe,bucketName:n,internalPaths:t,actualInfo:F}),f?(0,y.jsx)(s.Fragment,{children:je}):(0,y.jsxs)(x.azJ,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,y.jsx)(x.Smc,{title:(0,y.jsxs)("div",{className:"ObjectDetailsTitle",children:[U(be||"",!0),(0,y.jsx)("span",{className:"objectNameContainer",children:be})]}),items:Ce}),(0,y.jsx)(L.A,{tooltip:Te?"":(0,r.vj)([r.OV.S3_DELETE_OBJECT],"delete this object"),children:(0,y.jsx)(x.xA9,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,y.jsx)(_.R,{resource:[n,xe,[n,F.name].join("/")],scopes:[r.OV.S3_DELETE_OBJECT],errorProps:{disabled:!0},children:(0,y.jsx)(x.$nd,{id:"delete-element-click",icon:(0,y.jsx)(x.d7y,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:()=>{$(!0)},disabled:""===g&&F.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete".concat(""!==g?" version":"")})})})}),(0,y.jsx)(x.kCK,{icon:(0,y.jsx)(x.Hch,{}),label:"Object Info"}),(0,y.jsxs)(x.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Name:"}),(0,y.jsx)("br",{}),(0,y.jsx)("div",{style:{overflowWrap:"break-word"},children:be})]}),""!==g&&(0,y.jsxs)(x.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Version ID:"}),(0,y.jsx)("br",{}),g]}),(0,y.jsxs)(x.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Size:"}),(0,y.jsx)("br",{}),(0,c.nO)("".concat(F.size||"0"))]}),F.version_id&&"null"!==F.version_id&&""===g&&(0,y.jsxs)(x.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Versions:"}),(0,y.jsx)("br",{}),K.length," version",1!==K.length?"s":"",","," ",(0,c.qO)(Q)]}),""===g&&(0,y.jsxs)(x.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Last Modified:"}),(0,y.jsx)("br",{}),(e=>{const t=new Date,n=new Date(e),s=t.getTime()-n.getTime(),o=(0,c.eQ)(s,"ms");return""!==o.trim()?"".concat(o," ago"):"Just now"})(F.last_modified||"")]}),(0,y.jsxs)(x.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"ETAG:"}),(0,y.jsx)("br",{}),F.etag||"N/A"]}),(0,y.jsxs)(x.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Tags:"}),(0,y.jsx)("br",{}),0===pe.length?"N/A":pe.map(((e,t)=>(0,y.jsxs)("span",{children:[e,":",h()(F,"tags.".concat(e),""),t<pe.length-1?", ":""]},"key-vs-".concat(t.toString()))))]}),(0,y.jsx)(x.azJ,{className:"detailContainer",children:(0,y.jsx)(_.R,{scopes:[r.OV.S3_GET_OBJECT_LEGAL_HOLD,r.OV.S3_GET_ACTIONS],resource:n,children:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("strong",{children:"Legal Hold:"}),(0,y.jsx)("br",{}),F.legal_hold_status?"On":"Off"]})})}),(0,y.jsx)(x.azJ,{className:"detailContainer",children:(0,y.jsx)(_.R,{scopes:[r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS],resource:n,children:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("strong",{children:"Retention Policy:"}),(0,y.jsx)("br",{}),(0,y.jsx)("span",{className:"capitalizeFirst",children:(F.version_id&&F.version_id,(0,y.jsx)(s.Fragment,{children:F.retention_mode?F.retention_mode.toLowerCase():"None"}))})]})})}),!F.is_delete_marker&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(x.kCK,{label:"Metadata",icon:(0,y.jsx)(x.$vN,{})}),(0,y.jsx)(x.azJ,{className:"detailContainer",children:F&&ie?(0,y.jsx)(M,{metaData:ie}):null})]})]})]})},ue=e=>{let{versionToRestore:t,bucketName:n,objectPath:o,restoreOpen:a,onCloseAndUpdate:r}=e;const u=(0,l.jL)(),[h,p]=(0,s.useState)(!1);return(0,y.jsx)(ee.A,{title:"Restore File Version",confirmText:"Restore",isOpen:a,isLoading:h,titleIcon:(0,y.jsx)(x.YkU,{}),onConfirm:()=>{p(!0),i.F.buckets.putObjectRestore(n,{prefix:(0,c.nf)(o),version_id:t.version_id||""}).then((()=>{p(!1),r(!0),u((0,d.NV)({prefix:o,objectInfo:t}))})).catch((e=>{u((0,O.C9)((0,m.S)(e.error))),p(!1)}))},confirmButtonProps:{variant:"secondary",disabled:h},onClose:()=>{r(!1)},confirmationContent:(0,y.jsxs)(x.azJ,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,y.jsx)("br",{}),(0,y.jsx)("b",{children:o})," ",(0,y.jsx)("br",{})," with Version ID:",(0,y.jsx)("br",{}),(0,y.jsx)("b",{children:t.version_id}),"?"]})})},he=e=>{let{type:t}=e,n="#000",s="";switch(t){case"null":n="#07193E",s="NULL VERSION";break;case"deleted":n="#868686",s="DELETED";break;default:n="#174551",s="CURRENT VERSION"}return(0,y.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:s})},xe=f.Ay.div((e=>{let{theme:t}=e;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:h()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:"".concat(h()(t,"borderColor","#F8F8F8")," 1px solid"),padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:h()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}})),me=e=>{let{fileName:t,versionInfo:n,isSelected:s,checkable:o,isChecked:a,onCheck:i,onShare:l,onDownload:r,onRestore:d,onPreview:u,globalClick:h,index:m,key:p,style:b}=e;const g=n.is_delete_marker,f=[{icon:(0,y.jsx)(x.cyn,{}),action:u,tooltip:"Preview"},{icon:(0,y.jsx)(x.s3U,{}),action:r,tooltip:"Download this version"},{icon:(0,y.jsx)(x.liv,{}),action:l,tooltip:"Share this version"},{icon:(0,y.jsx)(x.YkU,{}),action:d,tooltip:"Restore this version"}];let v=null;n.is_delete_marker?v="deleted":n.is_latest?v="current":"null"===n.version_id&&(v="null");let _=j.c9.now();return n.last_modified&&(_=j.c9.fromISO(n.last_modified)),(0,y.jsx)(xe,{children:(0,y.jsx)(x.xA9,{container:!0,className:"ctrItem",onClick:()=>{h(n)},style:b,children:(0,y.jsx)(x.xA9,{item:!0,xs:12,className:"intermediateLayer".concat(" ",s?"selected":""),children:(0,y.jsxs)(x.xA9,{item:!0,xs:!0,className:"mainFileVersionItem ".concat(n.is_delete_marker?"deleted":""),children:[(0,y.jsx)(x.xA9,{item:!0,xs:12,children:(0,y.jsxs)(x.xA9,{container:!0,children:[(0,y.jsxs)(x.xA9,{item:!0,xs:!0,md:4,className:"versionContainer",children:[o&&(0,y.jsx)(x.Sc0,{checked:a,id:"select-".concat(n.version_id),name:"select-".concat(n.version_id),onChange:e=>{e.stopPropagation(),i(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),U(t,!0)," v",m.toString(),(0,y.jsx)("span",{className:"versionItem",children:v&&(0,y.jsx)(he,{type:v})})]}),(0,y.jsx)(x.xA9,{item:!0,xs:10,md:8,className:"buttonContainer",children:f.map(((e,t)=>(0,y.jsx)(x.m_M,{tooltip:e.tooltip,children:(0,y.jsx)(x.K0,{size:"small",id:"version-action-".concat(e.tooltip,"-").concat(t.toString()),className:"spacing".concat(" ",g?"buttonDisabled":""),disabled:g,onClick:t=>{t.stopPropagation(),g?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},"version-action-".concat(e.tooltip,"-").concat(t.toString()))))})]})}),(0,y.jsx)(x.xA9,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,y.jsxs)(x.xA9,{item:!0,xs:12,className:"collapsableInfo",children:[(0,y.jsxs)("span",{className:"versionData",children:[(0,y.jsx)("strong",{children:"Last modified:"})," ",_.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,y.jsxs)("span",{className:"versionData",children:[(0,y.jsx)("strong",{children:"Size:"})," ",(0,c.nO)("".concat(n.size||"0"))]})]})]})})},p)})},pe=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:a,selectedObject:d}=e;const u=(0,l.jL)(),[h,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(""),[g,f]=(0,s.useState)(!1),v=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),S=(0,_._)([a],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===v||void 0===v?void 0:v.mode);if((0,s.useEffect)((()=>{h&&i.F.buckets.deleteObject(a,{prefix:d,non_current_versions:!0,bypass:g}).then((()=>{t(!0)})).catch((e=>{u((0,O.C9)((0,m.S)(e.error))),p(!1)}))}),[h,t,u,d,a,g]),!d)return null;return(0,y.jsx)(ee.A,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:n,titleIcon:(0,y.jsx)(x.xWY,{}),isLoading:h,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmButtonProps:{disabled:"YES, PROCEED"!==j||h},confirmationContent:(0,y.jsxs)(s.Fragment,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,y.jsx)("b",{children:(0,c.x6)(d)}),"? ",(0,y.jsx)("br",{}),S&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)("div",{style:{marginTop:10},children:(0,y.jsx)(x.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:g,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{f(!g)},description:""})})}),(0,y.jsx)("br",{}),"To continue please type ",(0,y.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),(0,y.jsx)(x.xA9,{item:!0,xs:12,children:(0,y.jsx)(x.cl_,{id:"type-confirm",name:"retype-tenant",onChange:e=>{b(e.target.value)},label:"",value:j})})]})})},je=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:a,selectedVersions:c,selectedObject:d}=e;const u=(0,l.jL)(),[h,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),g=(0,o.d4)((e=>e.objectBrowser.retentionConfig)),f=(0,_._)([a],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===g||void 0===g?void 0:g.mode);return(0,s.useEffect)((()=>{if(h){const e=c.map((e=>({path:d,versionID:e,recursive:!1})));e.length>0&&i.F.buckets.deleteMultipleObjects(a,e,{all_versions:!1,bypass:j}).then((()=>{p(!1),t(!0)})).catch((e=>{u((0,O.C9)((0,m.S)(e.error))),p(!1)}))}}),[h,t,a,d,c,j,u]),c?(0,y.jsx)(ee.A,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:n,titleIcon:(0,y.jsx)(x.xWY,{}),isLoading:h,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmationContent:(0,y.jsxs)(s.Fragment,{children:["Are you sure you want to delete the selected ",c.length," ","versions for ",(0,y.jsx)("strong",{children:d}),"?",f&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)("div",{style:{marginTop:10},children:(0,y.jsx)(x.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:j,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!j)},description:""})})})]})}):null};var be=n(95098);const ge={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},fe=e=>{let{internalPaths:t,bucketName:n}=e;const a=(0,l.jL)(),r=(0,o.d4)((e=>e.objectBrowser.searchVersions)),u=(0,o.d4)((e=>e.objectBrowser.loadingVersions)),p=(0,o.d4)((e=>e.objectBrowser.selectedVersion)),j=(0,o.d4)(O.Rq),[b,g]=(0,s.useState)(!1),[f,v]=(0,s.useState)(null),[_,S]=(0,s.useState)(null),[w,T]=(0,s.useState)([]),[C,E]=(0,s.useState)(!1),[N,I]=(0,s.useState)(null),[k,B]=(0,s.useState)("date"),[F,V]=(0,s.useState)(!1),[D,R]=(0,s.useState)(!1),[z,U]=(0,s.useState)(!1),[M,W]=(0,s.useState)([]),[K,H]=(0,s.useState)(!1);let Y=[];f&&f.name&&(Y=f.name.split("/")),(0,s.useEffect)((()=>{u||f||a((0,d.SK)(!0))}),[u,f,a]),(0,s.useEffect)((()=>{u&&""!==t&&i.F.buckets.listObjects(n,{prefix:t,with_versions:j}).then((e=>{const n=h()(e.data,"objects",[]),s=(0,c.x6)(t),o=n.filter((e=>e.name===s));j?(v(o.find((e=>e.is_latest))||ge),T(o)):(v(o[0]),T([])),a((0,d.SK)(!1))})).catch((e=>{a((0,O.C9)((0,m.S)(e.error))),a((0,d.SK)(!1))}))}),[u,n,t,a,j]);const $=e=>{S(e),g(!0)},Z=e=>{S(e),V(!0)},q=e=>{I(e),E(!0)},Q=e=>{(0,P._)(a,n,t,e)},X=e=>{a((0,d.Ai)(e.version_id||""))},ee=w.filter((e=>!!e.version_id&&e.version_id.includes(r))),te=w.reduce(((e,t)=>t.size?e+t.size:e),0);ee.sort(((e,t)=>{if("size"===k)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;{const n=new Date(e.last_modified||"").getTime(),s=new Date(t.last_modified||"").getTime();return n<s?1:n>s?-1:0}}));const ne=e=>{if(M.includes(e)){const t=M.filter((t=>t!==e));return void W(t)}const t=[...M];t.push(e),W(t)};return(0,y.jsxs)(s.Fragment,{children:[b&&f&&(0,y.jsx)(J.default,{open:b,closeModalAndRefresh:()=>{S(null),g(!1),V(!1)},bucketName:n,dataObject:_||f}),C&&f&&N&&(0,y.jsx)(ue,{restoreOpen:C,bucketName:n,versionToRestore:N,objectPath:f.name||"",onCloseAndUpdate:e=>{E(!1),I(null),e&&(a((0,d.SK)(!0)),a((0,d.oe)(!0)))}}),F&&f&&(0,y.jsx)(G.default,{open:F,bucketName:n,actualInfo:{name:f.name||"",version_id:_&&_.version_id?_.version_id:"null",size:_&&_.size?_.size:0,content_type:"",last_modified:f.last_modified||""},onClosePreview:()=>{V(!1)}}),D&&(0,y.jsx)(pe,{deleteOpen:D,closeDeleteModalAndRefresh:e=>{R(!1),e&&(a((0,d.SK)(!0)),a((0,d.Ai)("")),a((0,d.oe)(!0)))},selectedBucket:n,selectedObject:t}),K&&(0,y.jsx)(je,{selectedBucket:n,selectedObject:(0,c.x6)(t),deleteOpen:K,selectedVersions:M,closeDeleteModalAndRefresh:e=>{H(!1),e&&(a((0,d.SK)(!0)),a((0,d.Ai)("")),a((0,d.oe)(!0)),W([]))}}),(0,y.jsxs)(x.xA9,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!f&&(0,y.jsx)(x.xA9,{item:!0,xs:12,children:(0,y.jsx)(x.z21,{})}),f&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(x.xA9,{item:!0,xs:12,children:(0,y.jsx)(A,{bucketName:n,internalPaths:(0,c.x6)(t),hidePathButton:!0})}),(0,y.jsx)(x.xA9,{item:!0,xs:12,sx:{position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}},["@media (max-width: ".concat(x.nmC.md,"px)")]:{"&::before":{display:"none"}}},children:(0,y.jsx)(x.lcx,{icon:(0,y.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,y.jsx)(x.j1U,{style:{width:20,height:20}})}),title:"".concat(Y.length>0?Y[Y.length-1]:f.name," Versions"),subTitle:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("span",{className:"detailsSpacer",children:(0,y.jsxs)("strong",{children:[w.length," Version",1===w.length?"":"s","\xa0\xa0\xa0"]})}),(0,y.jsx)("span",{className:"detailsSpacer",children:(0,y.jsx)("strong",{children:(0,c.qO)(te)})})]}),actions:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(L.A,{tooltip:"Select Multiple Versions",children:(0,y.jsx)(x.$nd,{id:"select-multiple-versions",onClick:()=>{U(!z)},icon:(0,y.jsx)(x.IN,{}),variant:z?"callAction":"regular",style:{marginRight:8}})}),z&&(0,y.jsx)(L.A,{tooltip:"Delete Selected Versions",children:(0,y.jsx)(x.$nd,{id:"delete-multiple-versions",onClick:()=>{H(!0)},icon:(0,y.jsx)(x.d7y,{}),variant:"secondary",style:{marginRight:8},disabled:0===M.length})}),(0,y.jsx)(L.A,{tooltip:"Delete Non Current Versions",children:(0,y.jsx)(x.$nd,{id:"delete-non-current",onClick:()=>{R(!0)},icon:(0,y.jsx)(x.rgY,{}),variant:"secondary",style:{marginRight:15},disabled:w.length<=1})}),(0,y.jsx)(x.l6P,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:k,label:"Sort by",onChange:e=>{B(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,y.jsx)(x.xA9,{item:!0,xs:12,sx:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto",["@media (max-width: ".concat(x.nmC.md,"px)")]:{height:600}},children:f.version_id&&"null"!==f.version_id&&(0,y.jsx)(be.B8,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:ee.length,rowHeight:108,rowRenderer:e=>{let{key:t,index:n,isScrolling:s,isVisible:o,style:a}=e;const i=w.length-n;return(0,y.jsx)(me,{style:a,fileName:(null===f||void 0===f?void 0:f.name)||"",versionInfo:ee[n],index:i,onDownload:Q,onRestore:q,onShare:$,onPreview:Z,globalClick:X,isSelected:p===ee[n].version_id,checkable:z,onCheck:ne,isChecked:M.includes(ee[n].version_id||"")},t)}})})]})]})]})},ve=e=>{if(e.name.endsWith("/"))return"";const t=j.c9.now(),n=j.c9.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?"Today, ".concat(n.toFormat("HH:mm")):n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},_e=e=>e.name.endsWith("/")||!e.size?"-":(0,c.nO)(String(e.size)),Se=[{label:"Name",elementKey:"name",renderFunction:U,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:ve,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:_e,renderFullObject:!0,width:100,enableSort:!0}],Oe=[{label:"Name",elementKey:"name",renderFunction:U,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:ve,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:_e,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:e=>e?"Yes":"No",width:60}];var we=n(46537);const Te=()=>{const e=(0,l.jL)(),t=(0,a.g)(),n=(0,a.Zp)(),[i,u]=(0,s.useState)("ASC"),[m,p]=(0,s.useState)("name"),j=t.bucketName||"",b=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),g=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),f=(0,o.d4)(we.s$),v=!(null===f||void 0===f||!f.includes("object-browser-only")),S=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),O=(0,o.d4)((e=>e.objectBrowser.records)),w=(0,o.d4)((e=>e.objectBrowser.searchObjects)),T=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),C=(0,o.d4)((e=>e.objectBrowser.connectionError)),E=(0,o.d4)((e=>e.system.anonymousMode)),A=(0,_._)(j,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET]),I=O.filter((e=>{if(""===w)return!0;return e.name.toLowerCase().indexOf(w.toLowerCase())>=0})).sort((0,N.$w)(m));let k=[];k="ASC"===i?I:I.reverse();const B=[{type:"view",tooltip:"View",onClick:t=>{var s;const o=t.name||"",a="/browser/".concat(j).concat(o?"/".concat((0,c.nf)(o)):"");!E||null!==(s=t.name)&&void 0!==s&&s.endsWith("/")?(e((0,d.KX)([])),n(a),E||(e((0,d.TO)(!0)),e((0,d.SK)(!0))),e((0,d.A7)("".concat(o?"".concat((0,c.nf)(o)):"")))):(0,P._)(e,j,"".concat((0,c.nf)(o)),t)},sendOnlyId:!1}];let F=A||E?"This location is empty".concat(S?"":", please try uploading a new file"):(0,r.vj)([r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],"view Objects in this bucket");C&&(F="Objects List unavailable. Please review your WebSockets configuration and try again");let L="calc(100vh - 290px)";return v&&(L="calc(100vh - 315px)"),(0,y.jsx)(x.bQt,{itemActions:B,columns:S?Oe:Se,isLoading:g,entityName:"Objects",idField:"name",records:k,customPaperHeight:L,selectedItems:T,onSelect:E?void 0:t=>{const n=t.target,s=n.value,o=n.checked;let a=[...T];return o?a.push(s):a=a.filter((e=>e!==s)),e((0,d.KX)(a)),e((0,d.A7)(null)),a},customEmptyMessage:F,sortEnabled:{currentSort:m,currentDirection:i,onSortClick:t=>{const n=h()(t,"sortDirection","DESC");p(t.sortBy),u(n),e((0,d.Yw)(!0))}},onSelectAll:()=>{if(e((0,d.A7)(null)),T.length===k.length)return void e((0,d.KX)([]));const t=k.map((e=>e.name));e((0,d.KX)(t))},rowStyle:e=>{var t;let{index:n}=e;return null!==(t=k[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:b?"100%":"initial"},noBackground:!0})};var ye=n(64681);const Ce=()=>{const e=(0,l.jL)(),t=(0,o.d4)((e=>e.objectBrowser.searchObjects));return(0,y.jsx)(ye.A,{placeholder:"Start typing to filter objects in the bucket",onChange:t=>{e((0,d.$X)(t))},value:t})};var Ee=n(30614);const Ae=(0,S.A)(s.lazy((()=>n.e(5941).then(n.bind(n,65941))))),Ne=(0,S.A)(s.lazy((()=>Promise.resolve().then(n.bind(n,30718))))),Ie=(0,S.A)(s.lazy((()=>n.e(2704).then(n.bind(n,32704))))),ke=(0,S.A)(s.lazy((()=>Promise.resolve().then(n.bind(n,37524))))),Be={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},Fe={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},Le={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},Ve=()=>{var e;const t=(0,l.jL)(),n=(0,a.g)(),u=(0,a.Zp)(),b=(0,a.zy)(),g=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),f=(0,o.d4)((e=>e.objectBrowser.rewind.bucketToRewind)),v=(0,o.d4)((e=>e.objectBrowser.versionsMode)),S=(0,o.d4)((e=>e.objectBrowser.showDeleted)),C=(0,o.d4)((e=>e.objectBrowser.objectDetailsOpen)),E=(0,o.d4)((e=>e.objectBrowser.selectedInternalPaths)),P=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),R=(0,o.d4)((e=>e.objectBrowser.simplePath)),z=(0,o.d4)((e=>e.objectBrowser.versionInfo)),U=(0,o.d4)((e=>e.objectBrowser.lockingEnabled)),G=(0,o.d4)((e=>e.objectBrowser.downloadRenameModal)),M=(0,o.d4)((e=>e.objectBrowser.selectedPreview)),J=(0,o.d4)((e=>e.objectBrowser.shareFileModalOpen)),W=(0,o.d4)((e=>e.objectBrowser.previewOpen)),K=(0,o.d4)((e=>e.objectBrowser.selectedBucket)),H=(0,o.d4)((e=>e.system.anonymousMode)),Y=(0,o.d4)((e=>e.objectBrowser.anonymousAccessOpen)),$=(0,o.d4)((e=>{var t;return(null===(t=e.objectBrowser)||void 0===t?void 0:t.records)||[]})),Z=(0,o.d4)(B.Nx),q=(0,o.d4)(B.fT),[Q,X]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(!1),[ne,se]=(0,s.useState)(!1),[oe,ae]=(0,s.useState)(!1),[ie,le]=(0,s.useState)(!1),[ce,ue]=(0,s.useState)(null),[he,xe]=(0,s.useState)(null),[me,pe]=(0,s.useState)(!1),je=I(z.status),be=n.bucketName||"",ge=b.pathname.split("/browser/".concat(be,"/")),ve=2===ge.length?ge[1]:"",_e=(0,c.x6)(ve),Se=_e.split("/").filter((e=>""!==e));let Oe=[be];Se.length>0&&(Oe=Oe.concat(Se));const we=(0,s.useRef)(null),ye=(0,s.useRef)(null),Ve=(0,o.d4)((e=>e.console.session&&e.console.session.permissions||{})),De=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],Pe=Oe.join("/"),Re=function(e,t){const n=T(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce(((e,t)=>{const n=w(t);return n&&e.push(".".concat(n)),e}),[]);return[...new Set(n)].join(",")}(Ve,Pe,De),ze=T(Ve,Pe,De),Ue=(0,_._)([Pe,...ze],[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS]),Ge=(0,_._)([Pe,...ze],[r.OV.S3_DELETE_OBJECT]),Me=(0,_._)([Pe,...ze],De)||H,Je=(0,_._)(be,[r.OV.S3_GET_BUCKET_POLICY,r.OV.S3_PUT_BUCKET_POLICY,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),We=(0,o.d4)((e=>e.objectBrowser.selectedObjects)),Ke=(()=>{let e=!1;if(1===We.length){e=!!$.find((e=>e.name==="".concat(We[0])&&e.delete_flag))}return e})(),He=(0,s.useCallback)((()=>{const e=We[0],t=(0,c.nf)(e);!me&&t&&i.F.buckets.getObjectMetadata(be,{prefix:t}).then((e=>{let t=h()(e.data,"objectMetadata",{});pe(!0),xe(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),pe(!0)}))}),[be,We,me]);(0,s.useEffect)((()=>{be&&!Ke&&He()}),[be,We,He,Ke]),(0,s.useEffect)((()=>{g&&f!==be&&t((0,d.rS)())}),[g,f,be,t]),(0,s.useEffect)((()=>{null!==ye.current&&(ye.current.setAttribute("directory",""),ye.current.setAttribute("webkitdirectory",""))}),[ye]),(0,s.useEffect)((()=>{if(1===We.length){const e=We[0],t=e.endsWith("/");let n=(0,N.IZ)(he,e);le(!("none"===n||!Ue)),ae(!(!Ue||t))}else ae(!1),le(!1)}),[We,Ue,he]),(0,s.useEffect)((()=>{ce||H||i.F.buckets.getBucketQuota(be).then((e=>{let t=null;e.data.quota&&(t=e.data),ue(t)})).catch((e=>{console.error("Error Getting Quota Status: ",e.error.detailedMessage),ue(null)}))}),[ce,be,H]),(0,s.useEffect)((()=>{We.length>0?t((0,d.TO)(!0)):0!==We.length||null!==E||P||t((0,d.TO)(!1))}),[We,E,t,P]),(0,s.useEffect)((()=>{ne||(t((0,B.ZU)(!0)),se(!0))}),[ne,t,se]),(0,s.useEffect)((()=>{!P&&!Z||H||i.F.buckets.bucketInfo(be).then((e=>{t((0,B.ZU)(!1)),t((0,B.$T)(e.data))})).catch((e=>{t((0,B.ZU)(!1)),t((0,O.C9)((0,m.S)(e)))}))}),[be,Z,t,H,P]),(0,s.useEffect)((()=>{""!==K&&i.F.buckets.getBucketRetentionConfig(K).then((e=>{t((0,d.PJ)(e.data))})).catch((()=>{t((0,d.PJ)(null))}))}),[K,t]);const Ye=e=>{if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var t=[];for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);$e(t,""),e.target.value=""}},$e=(0,s.useCallback)(((e,n)=>{let s="";R&&(s=R.endsWith("/")?R:R+"/");((e,n,s,o)=>{let a=a=>new Promise(((i,l)=>{let r="api/v1/buckets/".concat(n,"/objects/upload");const u=a.name,x=new Blob([a],{type:a.type});let m="";const p=h()(a,"path",""),j=h()(a,"webkitRelativePath","");let b=o;const g=(0,k.E0)(8);""!==p?b=p:""!==j&&(b=j);let f="";if(""!==s||""!==b){const e=b.split("/").slice(0,-1).join("/"),t=s.endsWith("/")?s.slice(0,-1):s;f="".concat(t).concat(t.endsWith("/")||""===e||e.startsWith("/")?"":"/").concat(e).concat(!e.endsWith("/")||""===e.trim()&&!s.endsWith("/")?"/":"")}r=""!==f?"".concat(r,"?prefix=").concat((0,c.nf)(f+u)):"".concat(r,"?prefix=").concat((0,c.nf)(u)),m=(0,c.nf)(f);const v=(0,c.nf)("".concat(n,"-").concat(m,"-").concat((new Date).getTime(),"-").concat(Math.random()));let _=new XMLHttpRequest;_.open("POST",r,!0),H&&_.setRequestHeader("X-Anonymous","1");const S=e.length>1;let O="An error occurred while uploading the file".concat(S?"s":"",".");const w={413:"Error - File size too large"};_.withCredentials=!1,_.onload=function(){if(_.status>=200&&_.status<300)t((0,d.rx)(v)),i({status:_.status}),(0,k.vy)(g);else{if(w[_.status])O=w[_.status];else if(_.response)try{const e=JSON.parse(_.response);O=e.detailedMessage}catch(e){O="something went wrong"}t((0,d.iL)({instanceID:v,msg:O})),l({status:_.status,message:O}),(0,k.vy)(g)}},_.upload.addEventListener("error",(()=>{l(O),t((0,d.iL)({instanceID:v,msg:"A network error occurred."}))})),_.upload.addEventListener("progress",(e=>{const n=Math.floor(100*e.loaded/e.total);t((0,d.DW)({instanceID:v,progress:n}))})),_.onerror=()=>{l(O),t((0,d.iL)({instanceID:v,msg:"A network error occurred."}))},_.onloadend=()=>{0===e.length&&t((0,d.Yw)(!0))},_.onabort=()=>{t((0,d.Dm)(v))};const T=new FormData;void 0!==a.size&&(T.append(a.size.toString(),x,u),(0,k.FP)(g,_),t((0,d.cP)({ID:g,bucketName:n,done:!1,instanceID:v,percentage:0,prefix:"".concat((0,c.x6)(m)).concat(u),type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,k.vx)(g,T))}));const i=[];t((0,d.Nu)());for(let t=0;t<e.length;t++){const n=e[t];i.push(a(n))}Promise.allSettled(i).then((e=>{const n=e.filter((e=>"rejected"===e.status));if(n.length>0){const e=i.length,s=i.length-n.length,o={errorMessage:"There were some errors during file upload",detailedError:"Uploaded files ".concat(s,"/").concat(e)};t((0,O.C9)(o))}t((0,d.Yw)(!0))}))})(e,be,s,n)}),[be,t,R,H]),Ze=(0,s.useCallback)((e=>{if(e&&e.length>0&&Me){let n=e[0].path,s=e;Re.length>0&&(s=e.filter((e=>{const t=w(e.name);return Re.includes(t)}))),s.length?($e(s,n),console.log("".concat(s.length," Allowed Files Processed out of ").concat(e.length,"."),Pe,...ze),s.length!==e.length&&t((0,O.C9)({errorMessage:"Upload is restricted.",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")}))):(t((0,O.C9)({errorMessage:"Could not process drag and drop.",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")})),console.error("Could not process drag and drop . upload may be restricted.",Pe,...ze))}Me||t((0,O.C9)({errorMessage:"Upload not allowed",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")}))}),[$e]),{getRootProps:qe,getInputProps:Qe,isDragActive:Xe,isDragAccept:et}=(0,p.VB)({noClick:!0,onDrop:Ze}),tt=(0,s.useMemo)((()=>({...Be,...Xe?Fe:{},...et?Le:{}})),[Xe,et]),nt=e=>{if(t((0,d.A7)(null)),t((0,d.cQ)({status:!1})),C&&null!==E){const e=(0,c.x6)(ve).split("/");e.pop();let t="";e&&e.length>0&&(t="".concat(e.join("/"),"/")),u("/browser/".concat(be,"/").concat((0,c.nf)(t)))}t((0,d.TO)(!1)),e&&t((0,d.Yw)(!0))};let st=j.c9.now();null!==q&&void 0!==q&&q.creation_date&&(st=j.c9.fromISO(q.creation_date));const ot=(null===We||void 0===We?void 0:We.length)<=1?"Download Selected":" Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download.",at=[{action:()=>{t((0,F.op)(be))},label:"Download",disabled:!Ue||Ke,icon:(0,y.jsx)(x.s3U,{}),tooltip:Ue?ot:(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"download objects from this bucket")},{action:()=>{t((0,F.mS)())},label:"Share",disabled:1!==We.length||!oe||Ke,icon:(0,y.jsx)(x.liv,{}),tooltip:oe?"Share Selected File":"Sharing unavailable"},{action:()=>{t((0,F.HS)())},label:"Preview",disabled:1!==We.length||!ie||Ke,icon:(0,y.jsx)(x.cyn,{}),tooltip:ie?"Preview Selected File":"Preview unavailable"},{action:()=>{t((0,F.oz)())},label:"Anonymous Access",disabled:1!==We.length||!We[0].endsWith("/")||!Je,icon:(0,y.jsx)(x._kf,{}),tooltip:1===We.length&&We[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:()=>{X(!0)},label:"Delete",icon:(0,y.jsx)(x.d7y,{}),disabled:!Ge||0===We.length,tooltip:Ge?"Delete Selected Files":(0,r.vj)([r.OV.S3_DELETE_OBJECT],"delete objects in this bucket")}];return(0,y.jsxs)(s.Fragment,{children:[J&&M&&(0,y.jsx)(Ne,{open:J,closeModalAndRefresh:()=>{t((0,d.Lf)(!1)),t((0,d.go)(null))},bucketName:be,dataObject:{name:M.name,last_modified:"",version_id:M.version_id}}),Q&&(0,y.jsx)(Ae,{deleteOpen:Q,selectedBucket:be,selectedObjects:We,closeDeleteModalAndRefresh:e=>{X(!1),e&&(t((0,O.Hk)("Objects deleted successfully.")),t((0,d.KX)([])),t((0,d.Yw)(!0)))},versioning:z}),ee&&(0,y.jsx)(Ie,{open:ee,closeModalAndRefresh:()=>{te(!1)},bucketName:be}),W&&M&&(0,y.jsx)(ke,{open:W,bucketName:be,actualInfo:{name:M.name||"",last_modified:"",version_id:M.version_id||"",size:M.size||0},onClosePreview:()=>{t((0,d.xE)(!1)),t((0,d.go)(null))}}),!!G&&(0,y.jsx)(re,{open:!!G,closeModal:()=>{t((0,d.Ew)(null))},currentItem:(null===(e=G.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:be,internalPaths:ve,actualInfo:{name:G.name,last_modified:"",version_id:G.version_id,size:G.size}}),Y&&(0,y.jsx)(Ee.default,{onClose:()=>{t((0,d.I8)(!1))},bucket:be,modalOpen:Y,prefilledRoute:"".concat(We[0],"*")}),(0,y.jsxs)(x.Mxu,{variant:"full",children:[H&&(0,y.jsx)("div",{style:{paddingBottom:16},children:(0,y.jsx)(Ce,{})}),(0,y.jsx)(x.azJ,{withBorders:!0,sx:{padding:"0 5px"},children:(0,y.jsx)(x.lcx,{icon:(0,y.jsx)("span",{children:(0,y.jsx)(x.brV,{style:{width:30}})}),title:be,subTitle:H?null:(0,y.jsxs)(x.azJ,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,y.jsxs)("span",{className:"detailsSpacer",children:["Created on:\xa0",(0,y.jsx)("strong",{children:null!==q&&void 0!==q&&q.creation_date?st.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,y.jsxs)("span",{className:"detailsSpacer",children:["Access:\xa0\xa0",(0,y.jsx)("strong",{children:(null===q||void 0===q?void 0:q.access)||""})]}),q&&(0,y.jsx)(s.Fragment,{children:(0,y.jsxs)("span",{className:"detailsSpacer",children:[q.size&&(0,y.jsx)(s.Fragment,{children:(0,c.qO)(q.size)}),q.size&&ce&&(0,y.jsxs)(s.Fragment,{children:[" ","/ ",(0,c.qO)(ce.quota||0)]}),q.size&&q.objects?" - ":"",q.objects&&(0,y.jsxs)(s.Fragment,{children:[q.objects,"\xa0Object",q.objects&&1!==q.objects?"s":""]})]})})]}),actions:(0,y.jsxs)(s.Fragment,{children:[!H&&(0,y.jsx)(L.A,{tooltip:"Rewind Bucket",children:(0,y.jsx)(x.$nd,{id:"rewind-objects-list",label:"Rewind",icon:(0,y.jsx)(x.Exy,{color:"alert",dotOnly:!0,invisible:!g,children:(0,y.jsx)(x.osr,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:()=>{te(!0)},disabled:!je||!(0,_._)(be,[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS])})}),(0,y.jsx)(L.A,{tooltip:"Reload List",children:(0,y.jsx)(x.$nd,{id:"refresh-objects-list",label:"Refresh",icon:(0,y.jsx)(x.fNY,{}),variant:"regular",onClick:()=>{v?t((0,d.SK)(!0)):(t((0,d.A3)()),t((0,d.Yw)(!0)))},disabled:!H&&(!(0,_._)(be,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET])||g)})}),(0,y.jsx)("input",{type:"file",multiple:!0,accept:Re||void 0,onChange:Ye,style:{display:"none"},ref:we}),(0,y.jsx)("input",{type:"file",multiple:!0,onChange:Ye,style:{display:"none"},ref:ye}),(0,y.jsx)(V,{bucketName:be,uploadPath:Pe,uploadFileFunction:e=>{we&&we.current&&we.current.click(),e()},uploadFolderFunction:e=>{ye&&ye.current&&ye.current.click(),e()}})]}),bottomBorder:!1})}),(0,y.jsxs)("div",{id:"object-list-wrapper",...qe({style:{...tt}}),children:[(0,y.jsx)("input",{...Qe()}),(0,y.jsxs)(x.azJ,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[v?(0,y.jsx)(s.Fragment,{children:null!==E&&(0,y.jsx)(fe,{internalPaths:E,bucketName:be})}):(0,y.jsx)(_.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:be,errorProps:{disabled:!0},children:(0,y.jsxs)(x.xA9,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:C?"detailsOpen":"",children:[!H&&(0,y.jsx)(x.xA9,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,y.jsx)(A,{bucketName:be,internalPaths:_e,additionalOptions:!je||g?null:(0,y.jsx)(x.Sc0,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:()=>{t((0,d.A3)()),t((0,d.lA)(!S)),nt(!0)},checked:S,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,y.jsx)(Te,{})]})}),!H&&(0,y.jsx)(_.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:be,errorProps:{disabled:!0},children:(0,y.jsxs)(D,{open:C,closePanel:()=>{nt(!1)},className:"".concat(v?"hideListOnSmall":""),children:[We.length>0&&(0,y.jsx)(x.Smc,{items:at,title:"Selected Objects:"}),null!==E&&(0,y.jsx)(de,{internalPaths:E,bucketName:be,onClosePanel:nt,versioningInfo:z,locking:U})]})})]})]})]})]})};var De=n(18218),Pe=n(69772),Re=n(48793),ze=n(59707),Ue=n(92452);const Ge=e=>{let{bucketName:t}=e;const n=(0,l.jL)(),i=(0,o.d4)(we.s$),c=(0,o.d4)((e=>e.objectBrowser.versionsMode)),u=(0,o.d4)((e=>e.objectBrowser.versionedFile)),h=(0,o.d4)((e=>e.objectBrowser.searchVersions)),m=!(null===i||void 0===i||!i.includes("object-browser-only")),p=(0,a.Zp)(),j=(0,De.A)(t,[r.OV.S3_GET_BUCKET_POLICY,r.OV.S3_PUT_BUCKET_POLICY,r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,r.OV.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,r.OV.S3_DELETE_BUCKET,r.OV.S3_GET_BUCKET_NOTIFICATIONS,r.OV.S3_PUT_BUCKET_NOTIFICATIONS,r.OV.S3_GET_REPLICATION_CONFIGURATION,r.OV.S3_PUT_REPLICATION_CONFIGURATION,r.OV.S3_GET_LIFECYCLE_CONFIGURATION,r.OV.S3_PUT_LIFECYCLE_CONFIGURATION,r.OV.ADMIN_GET_BUCKET_QUOTA,r.OV.ADMIN_SET_BUCKET_QUOTA,r.OV.S3_PUT_BUCKET_TAGGING,r.OV.S3_GET_BUCKET_TAGGING,r.OV.S3_LIST_BUCKET_VERSIONS,r.OV.S3_GET_BUCKET_POLICY_STATUS,r.OV.S3_DELETE_BUCKET_POLICY,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),b=(0,y.jsx)(s.Fragment,{children:c?(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(ye.A,{placeholder:"Start typing to filter versions of ".concat(u),onChange:e=>{n((0,d.aj)(e))},value:h})}):(0,y.jsx)(_.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,y.jsx)(Ce,{})})});return(0,s.useEffect)((()=>{n((0,O.ph)("object_browser"))}),[]),(0,y.jsx)(s.Fragment,{children:m?(0,y.jsxs)(x.xA9,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,y.jsx)(x.xA9,{children:(0,y.jsx)(Pe.A,{marginRight:30,marginTop:10})}),(0,y.jsxs)(x.xA9,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[b,(0,y.jsx)(ze.A,{})]})]}):(0,y.jsx)(Re.A,{label:(0,y.jsx)(x.EGL,{label:"Object Browser",onClick:()=>{p(r.zZ.OBJECT_BROWSER_VIEW)}}),actions:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(_.R,{scopes:r.pC[r.ac.BUCKET_ADMIN],resource:t,errorProps:{disabled:!0},children:(0,y.jsx)(L.A,{tooltip:j?"Configure Bucket":"You do not have the required permissions to configure this bucket. Please contact your MinIO administrator to request "+r.ac.BUCKET_ADMIN+" permisions.",children:(0,y.jsx)(x.$nd,{id:"configure-bucket-main",color:"primary","aria-label":"Configure Bucket",onClick:()=>p("/buckets/".concat(t,"/admin")),icon:(0,y.jsx)(x.Zes,{style:{width:20,height:20,marginTop:-3}}),style:{padding:"0 10px"}})})}),(0,y.jsx)(Ue.A,{})]}),middleComponent:b})})},Me=()=>{const e=(0,l.jL)(),t=(0,a.g)(),n=(0,a.zy)(),u=(0,o.d4)((e=>e.objectBrowser.loadingVersioning)),h=(0,o.d4)((e=>e.objectBrowser.rewind.rewindEnabled)),x=(0,o.d4)((e=>e.objectBrowser.rewind.dateToRewind)),m=(0,o.d4)((e=>e.objectBrowser.showDeleted)),p=(0,o.d4)((e=>e.objectBrowser.requestInProgress)),j=(0,o.d4)((e=>e.objectBrowser.loadingLocking)),b=(0,o.d4)((e=>e.objectBrowser.reloadObjectsList)),g=(0,o.d4)((e=>e.objectBrowser.simplePath)),f=(0,o.d4)((e=>e.system.anonymousMode)),v=(0,o.d4)((e=>e.objectBrowser.selectedBucket)),_=(0,o.d4)((e=>e.objectBrowser.records)),S=t.bucketName||"",O=n.pathname.split("/browser/".concat(S,"/")),w=2===O.length?O[1]:"",T=(0,s.useCallback)((t=>{let n=(new Date).toISOString();null!==x&&h&&(n=x);e({type:"socket/OBRequest",payload:{bucketName:S,path:t,rewindMode:h||m,date:n}})}),[S,m,x,h,e]),C=(0,s.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=(0,c.x6)(w);e((0,d.cQ)({status:!1}));let s=n;n.endsWith("/")||""===n||(s="".concat(n.split("/").slice(0,-1).join("/"),"/")),"/"===s&&(s=""),(s!==g||S!==v||t)&&(e((0,d.u)(!0)),T(s))}),[w,e,g,v,S,T]);(0,s.useEffect)((()=>()=>{e({type:"socket/OBCancelLast"})}),[e]),(0,s.useEffect)((()=>{const t=(0,c.x6)(w);e((0,d.vn)(!0)),t.endsWith("/")||""===t?(e((0,d.TO)(!1)),e((0,d.A7)(null)),e((0,d.Qy)(!0))):(e((0,d.oe)(!0)),e((0,d.TO)(!0)),e((0,d.SK)(!0)),e((0,d.A7)("".concat(t?"".concat((0,c.nf)(t)):""))))}),[S,w,x,h,e]),(0,s.useEffect)((()=>{C(!1)}),[C]),(0,s.useEffect)((()=>{b&&0===_.length&&!p&&C(!0)}),[b,_,p,C]);const E=(0,De.A)(S,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET])||f;return(0,s.useEffect)((()=>{u&&!f&&(E?i.F.buckets.getBucketVersioning(S).then((t=>{e((0,d.AP)(t.data)),e((0,d.vn)(!1))})).catch((t=>{console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,d.vn)(!1))})):(e((0,d.vn)(!1)),e((0,d.A3)())))}),[S,u,e,E,f]),(0,s.useEffect)((()=>{j&&(E?i.F.buckets.getBucketObjectLockingStatus(S).then((t=>{e((0,d.xW)(t.data.object_locking_enabled)),e((0,d.Qy)(!1))})).catch((t=>{console.error("Error Getting Object Locking Status: ",t.error.detailedMessage),e((0,d.Qy)(!1))})):(e((0,d.A3)()),e((0,d.Qy)(!1))))}),[S,j,e,E]),(0,y.jsxs)(s.Fragment,{children:[!f&&(0,y.jsx)(Ge,{bucketName:S}),(0,y.jsx)(Ve,{})]})}},30718:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var s=n(65043),o=n(22166),a=n(89923),i=n(61476),l=n.n(i),r=n(94141),c=n(24241),d=n(70579);const u=e=>{let{id:t,initialDate:n,label:o,maxSeconds:i,entity:l,onChange:r}=e;const u=Math.floor(i/86400),h=Math.floor(i%86400/3600),x=Math.floor(i%3600/60),[m,p]=(0,s.useState)(0),[j,b]=(0,s.useState)(0),[g,f]=(0,s.useState)(0),[v,_]=(0,s.useState)(!0),[S,O]=(0,s.useState)(c.c9.now());(0,s.useEffect)((()=>{p(u),b(h),f(x)}),[u,h,x]),(0,s.useEffect)((()=>{isNaN(j)||isNaN(m)||isNaN(g)||O(((e,t,n,s)=>c.c9.fromJSDate(e).plus({hours:n+24*t,minutes:s}))(n,m,j,g))}),[n,m,j,g]),(0,s.useEffect)((()=>{if(v){const e=S.toFormat("yyyy-MM-dd HH:mm:ss");r(e.split(" ").join("T"),!0)}else r("0000-00-00",!1)}),[S,r,v]),(0,s.useEffect)((()=>{let e=!0;(m<0||m>7||m>u||isNaN(m))&&(e=!1),(j<0||j>23||isNaN(j))&&(e=!1),(g<0||g>59||isNaN(g))&&(e=!1),m===u&&(j>h&&(e=!1),j===h&&g>x&&(e=!1)),m<=0&&j<=0&&g<=0&&(e=!1),_(e)}),[S,u,h,x,r,m,j,g]);const w={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,d.jsxs)(a.azJ,{className:"inputItem",children:[(0,d.jsx)(a.azJ,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,d.jsx)(a.l1Y,{htmlFor:t,children:o})}),(0,d.jsxs)(a.azJ,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,d.jsx)(a.azJ,{children:(0,d.jsx)(a.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"7",label:"Days",name:t,onChange:e=>{p(parseInt(e.target.value))},value:m.toString(),sx:w,noLabelMinWidth:!0})}),(0,d.jsx)(a.azJ,{children:(0,d.jsx)(a.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:e=>{b(parseInt(e.target.value))},value:j.toString(),sx:w,noLabelMinWidth:!0})}),(0,d.jsx)(a.azJ,{children:(0,d.jsx)(a.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:e=>{f(parseInt(e.target.value))},value:g.toString(),sx:w,noLabelMinWidth:!0})})]}),(0,d.jsx)(a.azJ,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:v?(0,d.jsxs)("div",{className:"validityText",children:[(0,d.jsx)(a.qYV,{}),(0,d.jsxs)("div",{children:[l," will be available until:"]})," ",(0,d.jsx)("div",{className:"validTill",children:S.toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,d.jsx)("div",{className:"invalidDurationText",children:"Please select a valid duration."})})]})};var h=n(56483),x=n(64159),m=n(20554),p=n(56629),j=n(53518),b=n(81708),g=n(6035);const f=e=>{let{open:t,closeModalAndRefresh:n,bucketName:i,dataObject:c}=e;const f=(0,m.jL)(),v=(0,o.d4)(x.Rq),_=(0,o.d4)(g.yL),[S,O]=(0,s.useState)(""),[w,T]=(0,s.useState)(!0),[y,C]=(0,s.useState)(!1),[E,A]=(0,s.useState)(""),[N,I]=(0,s.useState)(!0),[k,B]=(0,s.useState)("null"),F=new Date;return(0,s.useEffect)((()=>{f((0,b.Ex)())}),[f]),(0,s.useEffect)((()=>{if(void 0===c.version_id)return v?(p.F.buckets.listObjects(i,{prefix:(0,h.nf)(c.name||""),with_versions:v}).then((e=>{const t=(e.data.objects||[]).find((e=>e.is_latest));B(t?"".concat(t.version_id):"null")})).catch((e=>{f((0,x.Dy)((0,j.S)(e.error)))})),void T(!1)):(B("null"),void T(!1));B(c.version_id||"null"),T(!1)}),[i,c,v,f]),(0,s.useEffect)((()=>{if(N&&!w){C(!0),O("");const e=new Date("".concat(E)),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&p.F.buckets.shareObject(i,{prefix:(0,h.nf)(c.name||""),version_id:k,expires:""!==E?"".concat(n,"s"):""}).then((e=>{O(e.data),C(!1)})).catch((e=>{f((0,x.Dy)((0,j.S)(e.error))),O(""),C(!1)}))}}),[c,E,i,N,O,f,v,w,k]),(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)(r.A,{title:"Share File",titleIcon:(0,d.jsx)(a.liv,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:()=>{n()},children:[w&&(0,d.jsx)(a.xA9,{item:!0,xs:12,children:(0,d.jsx)(a.z21,{})}),!w&&(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(a.xA9,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:(0,d.jsx)(a.m_M,{placement:"right",tooltip:(0,d.jsxs)("span",{children:["You can reset your session by logging out and logging back in to the web UI. ",(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),"You can increase the maximum configuration time by setting the MINIO_STS_DURATION environment variable on all your nodes. ",(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),"You can use ",(0,d.jsx)("b",{children:"mc share"})," as an alternative to this UI, where the session length does not limit the URL validity."]}),children:(0,d.jsxs)("span",{children:["The following URL lets you share this object without requiring a login. ",(0,d.jsx)("br",{}),"The URL expires automatically at the earlier of your configured time (",(0,h.K7)(_),") or the expiration of your current web session."]})})}),(0,d.jsx)("br",{}),(0,d.jsx)(a.xA9,{item:!0,xs:12,children:(0,d.jsx)(u,{initialDate:F,id:"date",label:"Active for",maxSeconds:_,onChange:(e,t)=>{I(t),t?A(e):(A(""),O(""))},entity:"Link"})}),(0,d.jsx)(a.xA9,{item:!0,xs:12,sx:{marginBottom:10},children:(0,d.jsx)(a.EmB,{actionButton:(0,d.jsx)(l(),{text:S,children:(0,d.jsx)(a.$nd,{id:"copy-path",variant:"regular",onClick:()=>{f((0,x.h0)("Share URL Copied to clipboard"))},disabled:""===S||y,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,d.jsx)(a.TdU,{})})}),children:S})})]})]})})}},37524:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var s=n(65043),o=n(94141),a=n(89923),i=n(33097),l=n.n(i),r=n(93445),c=n(56483),d=n(56629),u=n(72809),h=n(66730),x=n(10934),m=n(70579);u.A.GlobalWorkerOptions.workerSrc="./scripts/pdf.worker.min.js";const p=e=>{let{path:t,loading:n,onLoad:o,downloadFile:i}=e;const[l,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0);if(!t)return null;const u=c>5?5:c,p=Array.from(Array(u).keys());return(0,m.jsxs)(s.Fragment,{children:[l&&0===c&&(0,m.jsx)(a.Wei,{variant:"error",title:"Error",message:(0,m.jsxs)(s.Fragment,{children:["File preview couldn't be displayed, Please try Download instead.",(0,m.jsx)(a.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(a.$nd,{id:"download-preview",onClick:i,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!n&&!l&&(0,m.jsx)(a.Wei,{variant:"warning",title:"File Preview",message:(0,m.jsxs)(s.Fragment,{children:["This is a File Preview for the first ",p.length," pages of the document, if you wish to work with the full document please download instead.",(0,m.jsx)(a.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(a.$nd,{id:"download-preview",onClick:i,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!l&&(0,m.jsx)(a.azJ,{sx:{overflowY:"auto","& .react-pdf__Page__canvas":{margin:"0 auto",backgroundColor:"transparent"}},children:(0,m.jsx)(h.A,{file:t,onLoadSuccess:e=>{let{_pdfInfo:t}=e;d(t.numPages||0),r(!1),o()},onLoadError:e=>{r(!0),o(),console.error(e)},children:p.map((e=>(0,m.jsx)(x.A,{pageNumber:e+1,renderAnnotationLayer:!1,renderTextLayer:!1,renderForms:!1},"render-page-".concat(e))))})})]})};var j=n(48245),b=n(20554);const g=e=>{let{bucketName:t,actualInfo:n,isFullscreen:o=!1}=e;const i=(0,b.jL)(),[u,h]=(0,s.useState)(!0),[x,g]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),_=(null===n||void 0===n?void 0:n.name)||"",S=(0,s.useCallback)((()=>{if(!f){const e=(0,c.nf)(_);d.F.buckets.getObjectMetadata(t,{prefix:e}).then((e=>{let t=l()(e.data,"objectMetadata",{});v(!0),g(t)})).catch((e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),v(!0)}))}}),[t,_,f]);(0,s.useEffect)((()=>{t&&_&&S()}),[t,_,S]);let O="";if(n){const e=(0,c.nf)(n.name||"");let s=document.baseURI.replace(window.location.origin,"");O="".concat(window.location.origin).concat(s,"api/v1/buckets/").concat(t,"/objects/download?preview=true&prefix=").concat(e),n.version_id&&(O=O.concat("&version_id=".concat(n.version_id)))}let w=(0,r.IZ)(x,_);const T=()=>{h(!1)};return(0,m.jsxs)(s.Fragment,{children:["none"!==w&&u&&(0,m.jsx)(a.xA9,{item:!0,xs:12,children:(0,m.jsx)(a.z21,{})}),f?(0,m.jsxs)(a.azJ,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===w&&(0,m.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:T,children:(0,m.jsx)("source",{src:O,type:"video/mp4"})}),"audio"===w&&(0,m.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:T,children:(0,m.jsx)("source",{src:O,type:"audio/mpeg"})}),"image"===w&&(0,m.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:O,alt:"preview",onLoad:T}),"pdf"===w&&(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(p,{path:O,onLoad:T,loading:u,downloadFile:()=>(0,j._)(i,t,O,n)})}),"none"===w&&(0,m.jsx)("div",{children:(0,m.jsx)(a.Wei,{message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:"Preview unavailable",sx:{margin:"15px 0"}})}),"none"!==w&&"video"!==w&&"audio"!==w&&"image"!==w&&"pdf"!==w&&(0,m.jsx)("div",{className:"iframeBase ".concat(u?"iframeHidden":""),children:(0,m.jsx)("iframe",{src:O,title:"File Preview",allowTransparency:!0,className:"iframeContainer ".concat(o?"fullHeight":w),onLoad:T,children:"File couldn't be loaded. Please try Download instead"})})]}):null]})},f=e=>{let{open:t,bucketName:n,actualInfo:i,onClosePreview:l}=e;return(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(o.A,{modalOpen:t,title:"Preview - ".concat(null===i||void 0===i?void 0:i.name),onClose:l,wideLimit:!1,titleIcon:(0,m.jsx)(a.jG,{}),children:(0,m.jsx)(g,{bucketName:n,actualInfo:i})})})}},72237:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(65043),o=n(70579);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,o.jsx)(s.Suspense,{fallback:t,children:(0,o.jsx)(e,{...n})})}}},81708:(e,t,n)=>{"use strict";n.d(t,{Ex:()=>p,HS:()=>h,mS:()=>x,op:()=>u,oz:()=>m});var s=n(80907),o=n(56483),a=n(37414),i=n(93445),l=n(6035),r=n(64159),c=n(24241),d=n(56629);const u=(0,s.zD)("objectBrowser/downloadSelected",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:d}=t;const u=n(),h=t=>{const n=(0,o.nf)("".concat(e,"-").concat(t.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),s=(0,a.E0)(8),c=(0,i.RG)(e,(0,o.nf)(t.name),t.version_id,t.size,null,s,(e=>{d((0,l.DW)({instanceID:n,progress:e}))}),(()=>{d((0,l.rx)(n))}),(e=>{d((0,l.iL)({instanceID:n,msg:e}))}),(()=>{d((0,l.Dm)(n))}),(()=>{d((0,r.Hk)("File download will be handled directly by the browser."))}));(0,a.FP)(s,c),d((0,l.cP)({ID:s,bucketName:e,done:!1,instanceID:n,percentage:0,prefix:t.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))};if(0!==u.objectBrowser.selectedObjects.length){let t=[];const n=e=>u.objectBrowser.selectedObjects.includes(e.name);if(t=u.objectBrowser.records.filter(n),1===t.length){if(t[0].name.length>200&&(0,o.oK)().toLowerCase().includes("win"))return void d((0,l.Ew)(t[0]));h(t[0])}else if(1===t.length)h(t[0]);else if(t.length>1){const n="".concat(c.c9.now().toFormat("LL-dd-yyyy-HH-mm-ss"),"_files_list.zip"),s=t.reduce(((e,t)=>{const n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log("Skipping ".concat(null===t||void 0===t?void 0:t.name," from download.")),e}),[]);return void await(0,i.Fj)(e,s,n)}}})),h=(0,s.zD)("objectBrowser/openPreview",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const a=n();if(1===a.objectBrowser.selectedObjects.length){let e;const t=e=>a.objectBrowser.selectedObjects.includes(e.name);e=a.objectBrowser.records.find(t),e&&(o((0,l.go)(e)),o((0,l.xE)(!0)))}})),x=(0,s.zD)("objectBrowser/openShare",(async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const a=n();if(1===a.objectBrowser.selectedObjects.length){let e;const t=e=>a.objectBrowser.selectedObjects.includes(e.name);e=a.objectBrowser.records.find(t),e&&(o((0,l.go)(e)),o((0,l.Lf)(!0)))}})),m=(0,s.zD)("objectBrowser/openAnonymousAccess",(async(e,t)=>{let{getState:n,dispatch:s}=t;const o=n();1===o.objectBrowser.selectedObjects.length&&o.objectBrowser.selectedObjects[0].endsWith("/")&&s((0,l.I8)(!0))})),p=(0,s.zD)("objectBrowser/maxShareLinkExpTime",(async(e,t)=>{let{rejectWithValue:n,dispatch:s}=t;return d.F.buckets.getMaxShareLinkExp().then((e=>{s((0,l.QV)(e.data.exp))})).catch((async e=>n(e.error)))}))},48245:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var s=n(56483),o=n(37414),a=n(93445),i=n(6035),l=n(64159);const r=(e,t,n,r)=>{var c;const d=(0,s.nf)("".concat(t,"-").concat(r.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),u=(0,s.oK)().toLowerCase().includes("win");if(((null===(c=r.name)||void 0===c?void 0:c.length)||0)>200&&u)return void e((0,i.Jl)(!0));const h=(0,o.E0)(8),x=(0,a.RG)(t,n,r.version_id,r.size||0,null,h,(t=>{e((0,i.DW)({instanceID:d,progress:t}))}),(()=>{e((0,i.rx)(d))}),(t=>{e((0,i.iL)({instanceID:d,msg:t}))}),(()=>{e((0,i.Dm)(d))}),(()=>{e((0,l.Hk)("File download will be handled directly by the browser."))}));(0,o.FP)(h,x),e((0,i.cP)({ID:h,bucketName:t,done:!1,instanceID:d,percentage:0,prefix:r.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}},49501:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var s=n(65043),o=n(89923),a=n(70579);const i=e=>{let{value:t}=e;const[n,i]=(0,s.useState)(!1);return(0,a.jsxs)(o.azJ,{sx:{display:"flex",alignItems:"center",flexFlow:"row",["@media (max-width: ".concat(o.nmC.sm,"px)")]:{flexFlow:"column"}},children:[(0,a.jsx)(o.cl_,{id:"inspect-dec-key",name:"inspect-dec-key",placeholder:"",label:"",type:n?"text":"password",onChange:()=>{},value:t,overlayIcon:(0,a.jsx)(o.TdU,{}),readOnly:!0,overlayAction:()=>navigator.clipboard.writeText(t)}),(0,a.jsx)(o.$nd,{id:"show-hide-key",style:{marginLeft:"10px"},variant:"callAction",onClick:()=>i(!n),label:"Show/Hide"})]})}},17640:()=>{},23237:()=>{},97492:()=>{},31815:()=>{},66671:()=>{},82787:()=>{}}]);
//# sourceMappingURL=2959.fdc343fa.chunk.js.map